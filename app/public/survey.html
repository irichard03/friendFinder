<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Nerd Entanglement - Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./style.css"/>
</head>

<body>
        <div class="container">
                <div class="jumbotron">
                        <h1 class="display-4"><i class="fas fa-dice-d20"></i>Nerd Entanglement</h1>
                        <p class="lead"></p>
                        <hr class="my-4">
                        <p>Fill out the information below to get started!</p>
                       
                        <div class="panel panel-default">
                                <div class="panel-heading">
                                  <h4 class="panel-title"></h4>
                                </div>
                                <div class="panel-body">
                      
                                  <form role="form survey">
                      
                                    <div class="form-group">
                                      <label for="name">Name:</label>
                                      <input type="text" class="form-control" id="nerdName">
                                    </div>

                                    <div class="form-group">
                                      <label for="photo">Photo Link:</label>
                                      <input type="text" class="form-control" id="nerdPhoto">
                                    </div>
                                    
                                    <div class="form-group">
                                      <h3><strong>Question 1</strong></h3>
                                      <h4>You can name more starwars characters than players on your fantasy football team.</h4>
                                      <select class="chosen-select" id="q1">
                                        <option value=""></option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                      </select>
                                  </div>

                                  <div class="form-group">
                                    <h3><strong>Question 2</strong></h3>
                                    <h4>You wondered if whether players on your bench was included when you answered question 1.</h4>
                                    <select class="chosen-select" id="q2">
                                      <option value=""></option>
                                      <option value="1">1 (Strongly Disagree)</option>
                                      <option value="2">2</option>
                                      <option value="3">3</option>
                                      <option value="4">4</option>
                                      <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                  <h3><strong>Question 3</strong></h3>
                                  <h4>You had difficulty answering both question 1 and 2 because you started thinking about drow and hobbits when you read the word fantasy.</h4>
                                  <select class="chosen-select" id="q3">
                                    <option value=""></option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                  </select>
                              </div>

                              <div class="form-group">
                                <h3><strong>Question 4</strong></h3>
                                <h4>You'd prefer this to be a math question.</h4>
                                <select class="chosen-select" id="q4">
                                  <option value=""></option>
                                  <option value="1">1 (Strongly Disagree)</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                              <h3><strong>Question 5</strong></h3>
                              <h4>If you were a cosplayer you would most likely dress up as an obscure anime character.</h4>
                              <select class="chosen-select" id="q5">
                                <option value=""></option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                              </select>
                          </div>

                          <div class="form-group">
                            <h3><strong>Question 6</strong></h3>
                            <h4>You just had a 30 minute argument with your friends about what qualifies as an obscure anime character...and none of the character's you named were the english dubbed version.</h4>
                            <select class="chosen-select" id="q6">
                              <option value=""></option>
                              <option value="1">1 (Strongly Disagree)</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                              <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>

                        <div class="form-group">
                          <h3><strong>Question 7</strong></h3>
                          <h4>You have no friends, you build robots in their stead.</h4>
                          <select class="chosen-select" id="q7">
                            <option value=""></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                          </select>
                      </div>

                      <div class="form-group">
                        <h3><strong>Question 8</strong></h3>
                        <h4>You agree that the blockbuster 1982 film E.T., directed by Stephen Spielberg, which although superiour in popular appeal, is ultimately inferior to his Richard Dreyfus starring magnum opus: Close Encounters of the Third Kind.</h4>
                        <select class="chosen-select" id="q8">
                          <option value=""></option>
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>

                    <div class="form-group">
                      <h3><strong>Question 9</strong></h3>
                      <h4>You have written a similiar survey to this using a combination of html and javascript.</h4>
                      <select class="chosen-select" id="q9">
                        <option value=""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                      </select>
                  </div>

                  <div class="form-group">
                    <h3><strong>Question 10 </strong></h3>
                    <h4>You interrupted a conversation today to opine about linux distro prefernces.</h4>
                    <select class="chosen-select" id="q10">
                      <option value=""></option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                  <a class="btn btn-primary btn-lg" id="continueButton" href="" role="button">Continue >></a>
                </div>
                
                <div>
                    <a href="/api/nerds">Nerd List</a>
                </div>

                <div id="displayBox">
                  
                </div>
               
               
                
        </div>
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script>

          $('#continueButton').click(function(event){
            event.preventDefault();
            const formName = $('#nerdName').val().trim();
            const formPhoto = $('#nerdPhoto').val().trim();
            const formArray = [];
            for(let i = 0; i <= 9; i++){
              formArray.push($(`#q${i+1}`).val().trim());
            }

            let nerd = {
              name: formName,
              photo: formPhoto,
              answers: formArray,
              match: [],
            }

             $.post("/api/nerds", nerd, function(data) {
              if (data) {
                clearForm();

              }

              else {
                clearForm();
              }

            }).done(function(data){
              $('#displayBox').append('<h4>Match Found!</h4>');
              $('#displayBox').append(`<img src='${data.photo}'>`);
              $('#displayBox').append(`<h4>${data.name}</h4>`);
              $('#displayBox').append(`</div><a class="btn btn-primary btn-lg" id="closeMe" href="" role="button">Close</a></div>`);
              $('#displayBox').css('visibility','visible');
            });

        });

        function clearForm(){
          $('#nerdName').val("")
          $('#nerdPhoto').val("")
          for(let i = 0; i <= 9; i++){
            $(`#q${i+1}`).val("");
          }
        }

        $('#closeMe').click(function(event){
          event.preventDefault();
          $('#displayBox').css('visibility','hidden');
        });
        </script>
</body>
</html>